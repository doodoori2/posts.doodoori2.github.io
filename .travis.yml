language: python

python:
  - "2.7"

env:
  global:
    - secure: "L6t7kCHZCQOwAEaZMMgTQuVHDbWTSbhGzLzCyiJdhAzwxiuwhftdc0MuqdM9KM9KKLZnMNSQkO2i0vQVONhqSpd4s9LNV2iIdfWtpCPHvXHcdi+cpj7KyBy4LIqcX5O508cKCaTCL/pYQG861eau/VJTRX5CW8FNVbTVLUJY8f0="

install:
  - pip install -r requirements.txt -q

before_script:
  - git config --global user.email "doodoori2@gmail.com"
  - git config --global user.name "Travis"

script:
  - pushd output
  - git checkout master
  - git pull
  - popd
  - rsync contents/html/ output/html -az --delete
  - pushd output
  - git add -f .
  - git commit -a -m "add new site content"
  - test $? -eq "0" && git push https://${GH_TOKEN}@github.com/doodoori2/doodoori2.github.io.git master --quiet
  - popd
